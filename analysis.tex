\section{Analysis}

\begin{lemma}[Past Perfect]
  Consider a temporal ledger protocol $\Y$
  constrained to report ledgers in which each transaction appears at most once.
  Consider an execution $\Exec$ with duration $R$ rounds in which $\Y$ is
  safe, live with liveness $u$, timely with timeliness $v$, and for which
  new honest transactions appear in every round.
  If for some honest party $P_1$ and some round $r_1$ it holds that
  $(r^*, \tx) \in \Ledger[P_1][][r_1]$, then
  for all honest parties $P_2$ and for all rounds $r^* + v < r_2 < R - u - 1$
  it holds that
  $(r^*, \tx) \in \Ledger[P_2][][r_2]$.
\end{lemma}
\begin{proof}
  Consider an execution as in the statement and suppose, towards a contradiction,
  that $(r^*, \tx) = \Ledger[P_1][][r_1][k]$ for some $k \in \mathbb{N}$
  with $r^* + v < r_2$, but
  $(r^*, \tx) \not\in \Ledger[P_2][][r_2]$.
  Due to the contiguous honest participation, at round $r_2 + 1$ there is
  a new honest transaction $\tx'$. Due to liveness,
  $(*, \tx') = \Ledger[P_1][][r_2 + 1 + u][k']$ for some $k' \in \mathbb{N}$.
  As $\tx'$ is new, it is not in $\Ledger[P_1][][r_1]$.
  Because the ledger is safe, $k' > k$.
  Due to liveness, $(*, \tx') \in \Ledger[P_2][][r_2 + 1 + u]$.
  Due to safety, $(*, \tx') = \Ledger[P_2][][r_2 + 1 + u][k']$.
  Therefore, $|\Ledger[P_2][][r_2 + 1 + u]| \geq k$.
  Due to safety, $\Ledger[P_2][][r_2 + 1 + u][k] = (r^*, \tx)$.
  Because $\Ledger[P_2][][r_2 + 1 + u]$ has a transaction
  that $\Ledger[P_2][][r_2]$ does not have (namely $\tx$)
  and it is safe, therefore
  $(r^*, \tx) \in \Ledger[P_2][][r_2 + 1 + u][|\Ledger[P_2][][r_2]|{:}]$.
  Since $r^* < r_2 - v$, this contradicts the timeliness with parameter $v$.\qed
\end{proof}

The above property, which follows from safety, liveness, timeliness and
contiguous honest participation is also known in the literature as
\emph{persistence}~\cite{backbone}.

% \begin{definition}[Transcribability]
%       Definition of transcribality...
% \end{definition}
%
% \begin{definition}[Determinism]
%       Let $\Pi^\Sigma$ be a State Machine Replication protocol that makes
%       oracle use of a signature protocol $\Sigma = (\textsf{Gen}, \textsf{Sig}, \textsf{Ver})$.
%       The protocol $\Pi$ is called \emph{soft deterministic} if,
%       when executed as an interactive turing machine $\Pi^\Sigma(i)$ initialized for party
%       with index $i$, the machine does not make use of any local randomness.
% \end{definition}
%
% TODO: define underlying, overlay, good, VIEW...

% TODO: Define the relationship between Z and Z';
%       we are hoping that Z' will have exactly the same writes as Z
%       (perhaps more due to adversarial writes) for each party
%       and that those will appear in "close enough" times (maybe up to $u$ away
%       from the original)
\begin{conjecture}[Simulation]
  Consider any overlay protocol $\Pi$, any number of overlay parties $n \in \mathbb{N}$,
  indices $\mathcal{H} \subseteq [n]$ of honest parties,
  and any $n$ overlay protocols $\Y[][1], \ldots, \Y[][n]$
  % TODO: can we speak of "goodness" outside of executions?
  such that $\forall i \in \mathcal{H}: \Y[][i] \text{ is good}$.
  % TODO: There is no need for the polynomiality constraint on A and Z,
  % but the reduction maintains polynomiality
  For all PPT adversaries $\mathcal{A}$ and all PPT $\mathcal{Z}$ environments,
  there is a PPT simulator $\mathcal{S}$ and there is a PPT environment $\mathcal{Z}'$ such that:

  $\RBView[\Pi][({\Y[][1]}, \cdots, {\Y[][n]})][\mathcal{A}][\mathcal{Z}][n][\mathcal{H}]
   =
   \PEView[\Pi][\mathcal{S}][\mathcal{Z}'][n][\mathcal{H}]$
\end{conjecture}

\begin{conjecture}[Cross-party]
  Consider an \rollerblade execution with $n \in \mathbb{N}$ underlying
  and $m \in \mathbb{N}$ overlay parties.
  For all rounds $r$, all overlay parties $\RB[j], \RB[j']$,
  and all underlying $i \in \mathbb{N}$:

  \[
    \Sim[j][r](i, r - v_i, r) = \Sim[j][r](i, r - v_i, r)
  \]
\end{conjecture}

% TODO: Consider the case of "written communication", or "transferable origin" constructions
% \begin{definition}[Authenticated Communication Protocol]
%       An Authenticated Communication Protocol ACP is...
%       Define what is the syntax of $\Sigma$... (and maybe use a different letter)
%       ... TODO
% \end{definition}
% \begin{definition}[Peer-to-Peer ACP]
%       Make an ACP by composing an existentially unforgeable signature scheme and
%       a synchronous network... TODO
% \end{definition}
% The above definition still allows for use of randomness within the $\Sigma$ protocol of the
% signature, which captures the functionality of generating keys, signing, and verifying
% messages. Typical BFT protocols such as Streamlet~\cite{streamlet} and Hot Stuff~\cite{hotstuff}
% satisfy the \emph{soft determinism} definition.