\section{Analysis}\label{sec:analysis}

\begin{definition}[Rollerblade Belief System and Honesty Correspondence]
  Given a sequence of \rollerblade-underlying-respecting
  protocols $\mathcal{Y} = (\Y[][1], \ldots, \Y[][\ell])$,
  define for each $i \in [\ell]$ the predicate, on
  a collective execution $\mathcal{E}$ of $\mathcal{Y}$,
  $
  \text{good}_i(\mathcal{E}) = \text{``} \Y[][i] \text{ is safe, live$(u_i)$, and timely$(v_i)$ in $\mathcal{E}$''}\,.
  $

  Next, for any $H \subseteq [\ell]$, we define
  $
    \text{good}_H(\mathcal{E}) = \text{``}\forall i \in H: \text{good}_i(\mathcal{E})\text{''}\,.
  $

  Define $\mathcal{H}^{-1}$ on the domain $2^{[n]}$ as
  $\mathcal{H}^{-1}(H) = \text{good}_H$.
  Then the \emph{\rollerblade honesty correspondence $\mathcal{H}$}
  is the inverse of $\mathcal{H}^{-1}$ and the \emph{\rollerblade belief system
  $\mathcal{B}$} is the domain of $\mathcal{H}$.
\end{definition}

For example, if $\mathcal{Y} = (\Y[][1], \Y[][2], \Y[][3])$,
then for $B = \text{good}_1 \land \text{good}_3$, it holds that
$B \in \mathcal{B}$ and $\mathcal{H}(B) = \{1, 3\}$.

As an example of a $\Y[][1]$, consider the Bitcoin Backbone protocol.
Then a $\text{good}_1$-respecting environment $\mathcal{Z}$ is an environment
that ensures the Bitcoin Backbone protocol execution is safe, live, and timely.
This can be done, for example, by demanding that the corruption of $\Y[][1]$
parties outside of $\Lambda$s remains in the minority. In case the environment
detects an upcoming security violation (due to a negligible event such as a
Random Oracle collision), it can conclude the execution.

\begin{restatable}[Replication]{theorem}{restateLemCrossParty}\label{thm:replication}
  Consider a \rollerblade execution $\mathcal{E}$ with duration $R$ rounds
  with $n \in \mathbb{N}$ underlying
  and $m \in \mathbb{N}$ compositor parties.
  For
  all underlying indexes $i \in [n]$ such that $\text{good}_i(\mathcal{E})$,
  all rounds $1 \leq r < R - \max(v_i, u_i)$,
  and
  all compositor party indexes $j, j' \in [m]$
  $\Sim[j][r] = \Sim[j'][r]\,,$
  where $\Sim[j][r]$ (resp. $\Sim[j'][r]$) indicates the result of calling
  \emulationSnapshot of $\RB[j]$ (resp. $\RB[j']$) with inputs
  $(i, r)$
  \emph{in vitro} at the end of round $r + v_i$ of $\mathcal{E}$.
\end{restatable}

\begin{restatable}[Consistency]{lemma}{restateLemConsistency}\label{lem:consistency}
  Consider a \rollerblade $\Lambda$ execution $\mathcal{E}$ with duration $R$ rounds
  sampled from $\LCExec_m(\Lambda, \mathcal{Y}, \mathcal{A}, \mathcal{Z})$
  with overlay protocols $\mathcal{Y}$, adversary $\mathcal{A}$ and environment $\mathcal{Z}$,
  and let $\Delta_v = \max\{v_i\}_{i \in [n]}$,
  where $v_i$ denotes the timeliness
  promised by ledger protocol $\Y[i]$.
  Let $H \subseteq [n]$ be the subset of good underlying ledger protocol indices among $\mathcal{Y}$
  in $\mathcal{E}$.
  Then the execution is $(j, H, \Delta_v)$-consistent for all $j \in [m]$.
\end{restatable}

% TODO: Consider removing all "in vitro" invocations by requiring the
% compositor to output a configuration during every round by itself within
% the execution. This would simplify the language.

% TODO: Define the relationship between Z and Z';
%       we are hoping that Z' will have exactly the same writes as Z
%       (perhaps more due to adversarial writes) for each party
%       and that those will appear in "close enough" times (maybe up to $u$ away
%       from the original)
\begin{restatable}[Emulation]{conjecture}{restateConjEmulation}\label{conj:emulation}
  For all \rollerblade-suitable-overlay protocols $\Pi$
  and any sequence of \rollerblade-suitable-underlying
  protocols $\mathcal{Y} = (\Y[][1], \ldots, \Y[][\ell])$
  for the \rollerblade-belief-system $\mathcal{B}$ of $\mathcal{Y}$
  and honesty correspondence $\mathcal{H}$,
  the compositor \rollerblade of Section~\ref{sec:construction} is
  $(\Pi, n, \mathcal{Y}, \mathcal{B}, \mathcal{H}, \Delta_u, \Delta_v)$-\emph{faithful},
  where $n = \ell$, $\Delta_u = \max\{u_i\}_{i \in [n]}$,
  $\Delta_v = \max\{v_i\}_{v \in [n]}$
  and $u_i, v_i$ are the promised liveness and timeliness of $\Y[][i]$.
\end{restatable}

% TODO: Consider the case of "written communication", or "transferable origin" constructions
% \begin{definition}[Authenticated Communication Protocol]
%       An Authenticated Communication Protocol ACP is...
%       Define what is the syntax of $\Sigma$... (and maybe use a different letter)
%       ... TODO
% \end{definition}
% \begin{definition}[Peer-to-Peer ACP]
%       Make an ACP by composing an existentially unforgeable signature scheme and
%       a synchronous network... TODO
% \end{definition}
% The above definition still allows for use of randomness within the $\Sigma$ protocol of the
% signature, which captures the functionality of generating keys, signing, and verifying
% messages. Typical BFT protocols such as Streamlet~\cite{streamlet} and Hot Stuff~\cite{hotstuff}
% satisfy the \emph{soft determinism} definition.
