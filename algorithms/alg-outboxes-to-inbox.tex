\begin{algorithm}[H]
  \caption{\label{alg.outboxes-to-inbox} The outbox reconciliation algorithm ran by party $\RB[j]$.
  The algorithm rewrites messages placed in an outbox of one overlay party and translates them into
  messages in an inbox which is to be consumed by a different overlay party.}
  \begin{algorithmic}[1]
    \Function{\outboxesToInbox}{$\outboxes$}
      \Let{\inbox}{[\,]}

      \For{$\outbox \in \outboxes$}
        \For{$\netout \in \outbox$}
          % TODO(dionyziz): typeset
          \State{\inbox.\append(\{
            \textsf{from}{:} \netout\textsf{.to},
            \textsf{msg}{:} \netout\textsf{.msg}
          \})}
        \EndFor
      \EndFor

      \State\Return{\sf inbox}
    \EndFunction
    \vskip2pt
  \end{algorithmic}
\end{algorithm}
