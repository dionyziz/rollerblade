\begin{algorithm}
  \caption{\label{alg.rollerblade}
    The \rollerblade compositor.
  }
  \begin{algorithmic}[1]
    \Protocol{\rollerblade}
      % TODO(dionyziz): typeset this, fix the spacing after function names
      \State{\textbf{public function} \emulationSnapshot($i, \emulationRound$)}
      \State{\textbf{public function} \writeToMachine($i, \data$)}

      \State{\textbf{function} \prepareEmulationInputs($i, \Ledger[j][i], \emulationRound$)}
      \State{\textbf{function} \emulate($i, \Ledger[j][i], \emulationRound$)}
      \State{\textbf{function} \outboxesToInbox($\outboxes, i', i$)}
      \State{\textbf{function} \relay()}
      \State{\textbf{function} \decodeUnderlying($i, L$)}

      \Function{\sf construct}{$\Y[j], \Pi$}
        \Let{\this.\Y[j]}{\Y[j]}
        \Let{\this.\Pi}{\Pi}
        \Let{\this.n}{|\Y[j]|}\Comment{Number of overlay parties}
        \Let{\this.\Delta_u}{\max \{\this.\Y[j][i].u\}_{i \in [n]}}
        \Let{\this.\Delta_v}{\max \{\this.\Y[j][i].v\}_{i \in [n]}}
        \Let{\this.\Delta}{\Delta_u + \Delta_v}
        \Let{\this.\now}{0}\Comment{Current round number}
      \EndFunction

      \Function{\sf execute}{\,}
        \Let{\this.\now}{\this.\now + 1}
        \State{$\this.\relay()$}
      \EndFunction
    \EndProtocol
    \vskip2pt
  \end{algorithmic}
\end{algorithm}
