\begin{algorithm}[H]
  \caption{\label{alg.relay} The \emph{relay} algorithm executed by every Rollerblade participant.
  Each Rollerblade participant is speaking to all the underlying $\wheel[i]$ protocols.}
  \begin{algorithmic}[1]
    \Function{\sf Relay}{}\Comment{Ran by rollerblade participant $j$}
      \Let{\overline{C}}{[\,]}\Comment{Checkpoints}

      \For{$i \gets 1 \text { to } n$}
        \State{$\overline{C}.\textsf{append}(\{
          \textsf{sourceIndex}{:} i,
          \textsf{payload}{:} \wheel[i].\textsf{transcribe}()
        \}\})$}
      \EndFor

      \For{$i \gets 1 \text{ to } n$}
        \For{$C \in \overline{C}$}
          \State{$\wheel[i].\textsf{write}(\Pi.\textsf{encode}(i, (\text{``checkpoint''}, C)))$}
        \EndFor
      \EndFor
    \EndFunction
    \vskip2pt
  \end{algorithmic}
\end{algorithm}
