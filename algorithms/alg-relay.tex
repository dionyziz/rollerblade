\begin{algorithm}[H]
  \caption{\label{alg.relay} The \emph{Relayer} party.
  This can be executed by any helpful but untrusted party.
  At least one honest relayer must be running.
  A \rollerblade client can run the relayer themselves if they so wish.}
  \begin{algorithmic}[1]
    \Party{\sf Relayer}
      % TODO(dionyziz): Typeset this
      \State{$Y$}
      \State{$\sid$}

      \Function{\sf construct}{$Y$, $\sid$}\Comment{Ran before round $0$}
        \Let{\this.Y}{Y}
        \Let{\this.\sid}{\sid}
      \EndFunction

      \Function{\sf execute}{$\,$}\Comment{Executed on every round}
        \For{$i \gets 1 \text{ to } n$}\Comment{Source}
          \Let{\tau}{\this.\Y[][i].\transcribe()}\Comment{Checkpoint}

          \For{$i' \gets 1 \text{ to } n$}\Comment{Target}
            \If{$i = i'$}
              \Continue
            \EndIf
            % TODO(dionyziz): typeset this
            \Let{\instruction}{\{
              \sid{:} \this.\sid,
              \textsf{type}{:} \text{`checkpoint'},
              \textsf{data}{:} \{
                \textsf{from}{:} i,
                \textsf{certificate}{:} \tau
              \}
            \}}
            \Let{\textsf{encoded}}{\Y[][i'].\encode(\serialize(\instruction))}
            \State{$\Y[][i'].\lwrite(\textsf{encoded})$}
          \EndFor
        \EndFor
      \EndFunction
    \EndParty
    \vskip2pt
  \end{algorithmic}
\end{algorithm}
